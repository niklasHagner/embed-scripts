var SCRBBL=function(e,t){"use strict";var n=e.SCRBBL||{};return n.define=function(t,i){"function"==typeof t&&(i=t,t="");for(var r=n,s=(i||function(){return{}}).call({},e),a=t.split("."),o=a.shift();o;)r=r[o]?r[o]:r[o]={},o=a.shift();for(var l in s)s.hasOwnProperty(l)&&(r[l]=s[l]);return r},n.use=function(e){return n.define(e)},n}(window);SCRBBL.define("utils",function(e,t){"use strict";e.document;return{is:{nativ:function(e){return e&&String(e).toLowerCase().indexOf("[native code]")>-1},objectEmpty:function(e){for(var t in e)return!1;return!0},mobile:function(){if(null!=navigator.userAgent.match(/(Android|webOS|iPhone|iPod|BlackBerry|BB|IEMobile|Opera Mini)/gi)&&null!=navigator.userAgent.match(/(Mobile|Tablet)/gi))return!0;return!1}},getDataAttrs:function(e){for(var t,n={},i=e.attributes,r=0,s=i.length;r<s;r++)t=i[r],/^data-/.test(t.name)&&(n[t.name.substr(5)]=t.value);return n},createGUID:function(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}}}),SCRBBL.define("utils.es5",function(e,t){"use strict";var n=e.SCRBBL,i=e.document,r=n.use("utils");return{getElementsByClassName:function(e,t,n){t=t||i,n=n||"*";var s,a=[];if(r.is.nativ(i.getElementsByClassName))s=t.getElementsByClassName(e),"*"!==n&&r.is.nativ(Array.prototype.filter)?(n=n.toUpperCase(),a=Array.prototype.filter.call(s,function(e){return e.nodeName==n})):a=a.slice.call(s,0);else{var o,l=0;if(r.is.nativ(i.evaluate))for(s=i.evaluate(".//"+n+'[contains(concat(" ", @class, " "), " '+e+' ")]',t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);o=s.snapshotItem(l++);)a.push(o);else{var c,u=new RegExp("(^|\\s)"+e+"(\\s|$)");for(s=t.getElementsByTagName(n);o=s[l++];)(c=o.className)&&(c==e||u.test(c))&&a.push(o)}}return a}}}),SCRBBL.define("inst",function(e,t){"use strict";var n=e.SCRBBL,i=(e.document,n.use("utils")),r=function(e){var t={type:(e=e.split("/"))[1],id:parseInt(e[2],10),theme:{},state:{}};if(t.type,!t.type.match(/event|board|timeline|slideshow|post|article|mobile|livescoreboard|manualscoreboard/gi))throw!0;return t.theme.id=e.length>=4?parseInt(e[3],10):0,t};return{create:function(e){for(var s,a,o={},l={},c=0,u=e.length;c<u;c++){if(a={},s=e[c],o=i.getDataAttrs(s),i.is.objectEmpty(o)||o.src===t)a.error={code:1,text:'&lt;div&gt; element with class name "scrbbl-embed" found but missing "data-src" attribute.'};else{try{a=r(o.src)}catch(e){a.error={code:0,text:'Error parsing the "data-src" attribute.'}}a.params=o}a.el=s,a.guid=i.createGUID(),l[a.guid]=a}n.instance=l},parsesrc:r}}),SCRBBL.define("messages",function(e,t){"use strict";var n=e.SCRBBL,i=e.document,r=(n.use("utils"),n.use("render.dims")),s={theme:function(e,t){var n=e.el.getElementsByTagName("iframe")[0];e.theme=t.args.theme,n.width=n.style.width=r.width(e),n.height=n.style.height=r.height(e),e.theme.size.width_autoscale&&(n.style.width="50px",n.style.minWidth=r.width(e)),(e.params.height||e.theme.size&&e.theme.size.height)&&a(e,{action:"height.resize"})},autoscale:function(e,t){var n=e.el.getElementsByTagName("iframe")[0];n.height=n.style.height=r.height(e,t.args.height+"")},login:{opened:function(t,i){t.state.open=!0,s.login.scroll.call(this,t),n.on(e,"scroll",function(){s.login.scroll.call(this,t)})},closed:function(t,n){var i=e.SCRBBL,r=!0;for(var s in t.state.open=!1,i.instance)if(!i.instance[s].error&&i.instance[s].state.open){r=!1;break}r&&i.off(e,"scroll")},scroll:function(t){var n,r,s,o=e.SCRBBL,l=i.body.scrollTop||i.documentElement.scrollTop,c=e.innerHeight;t=[];for(var u in o.instance)!o.instance[u].error&&o.instance[u].state.open&&t.push(o.instance[u]);for(var h in t)if((s=(r=t[h].el.getElementsByTagName("iframe")[0]).getBoundingClientRect()).bottom>0&&s.top<(e.innerHeight||i.documentElement.clientHeight)){var m=r;for(n=0;m;)n+=m.offsetTop,m=m.offsetParent;a(t[h],{action:"login.adjust",A:l,B:c,C:n})}}},lightbox:{opened:function(t,i){t.state.open=!0,s.lightbox.scroll.call(this,t),n.on(e,"scroll",function(){s.lightbox.scroll.call(this,t)})},closed:function(t,n){var i=e.SCRBBL,r=!0;for(var s in t.state.open=!1,i.instance)if(!i.instance[s].error&&i.instance[s].state.open){r=!1;break}r&&i.off(e,"scroll")},scroll:function(t){var n,r,s,o=e.SCRBBL,l=i.body.scrollTop||i.documentElement.scrollTop,c=e.innerHeight;t=[];for(var u in o.instance)!o.instance[u].error&&o.instance[u].state.open&&t.push(o.instance[u]);for(var h in t)if((s=(r=t[h].el.getElementsByTagName("iframe")[0]).getBoundingClientRect()).bottom>0&&s.top<(e.innerHeight||i.documentElement.clientHeight)){var m=r;for(n=0;m;)n+=m.offsetTop,m=m.offsetParent;a(t[h],{action:"lightbox.adjust",A:l,B:c,C:n})}}}},a=function(e,t){if(e){t=t||{};e.el.getElementsByTagName("iframe")[0].contentWindow.postMessage([{sender:"SCRBBL",guid:e.guid,args:t}],"*")}};return{receive:function(){n.on(e,"message",function(e){var i,r,a=s;if((i="string"!=typeof i||-1===navigator.userAgent.indexOf("MSIE 8.0")&&-1===navigator.userAgent.indexOf("MSIE 9.0")?e.data[0]:(i=JSON.parse(e.data))[0])!==t&&i.sender!==t&&"SCRBBL"==i.sender&&(r=n.instance[i.guid])!==t){for(var o=i.args.action.split("."),l=o.shift();l;)a=a.hasOwnProperty(l)?a[l]:t,l=o.shift();a&&a.call(this,r,i)}})},send:a}}),SCRBBL.define("render.iframe",function(e,t){"use strict";var n=e.SCRBBL,i=e.document,r=(n.use("utils"),n.use("render.dims")),s=n.use("messages");return{iframe:function(e){var t=navigator.appVersion.match("MSIE 8")||navigator.appVersion.match("MSIE 9"),a='<iframe name="'+e.guid+'" width="'+r.width(e)+'" height="'+r.height(e)+'" frameborder="0" allowtransparency="true" '+(t?'scrolling="yes" ':'scrolling="no" ')+'title="scrbbl:'+e.type+' ScribbleLive Embed" src="'+function(e){var t,n,r=i.getElementById("scrbbl-js").src.split("/widgets/embed.js")[0],s="";if(e.params)for(t in e.params)e.params.hasOwnProperty(t)&&0==t.indexOf(e.type+"-")&&(n=t.replace(e.type+"-",""))&&(s=s+"&"+(n=encodeURIComponent(n)+"="+encodeURIComponent(e.params[t])));var a=new RegExp("[\\?&]_scrbbl=([^&#]*)").exec(i.location.search),o=null===a?null:a[1];return r+{event:"/Embed/v7.aspx",board:"/widgets/pinboard/pinboard.aspx",article:"",timeline:"/widgets/timeline/timeline.aspx",slideshow:"",post:"/Embed/post.aspx",mobile:"/Event/mobile.aspx",livescoreboard:"/widgets/livescoreboard/livescoreboard.aspx",manualscoreboard:"/widgets/manualscoreboard/manualscoreboard.aspx"}[e.type]+"?Id="+e.id+(0!==e.theme.id?"&ThemeId="+e.theme.id:"")+(null!==o?"&_scrbbl="+o:"")+s}(e)+'" class="scrbbl-embed scrbbl-'+e.type+'" style="border: none; visibility: visible;'+(r.width(e)?" width:"+r.width(e)+";":"")+(r.height(e)?" height:"+r.height(e)+";":"")+'"></iframe>';e.el.style.visibility="hidden",e.el.innerHTML=a,n.on(e.el.getElementsByTagName("iframe")[0],"load",function(){e.el.style[e.el.style.removeProperty?"removeProperty":"removeAttribute"]("visibility"),(e.params.height||e.theme.size&&!e.theme.size.height_autoscale&&e.theme.size.height)&&s.send(e,{action:"height.fixed"})})}}}),SCRBBL.define("render.dims",function(e,t){"use strict";var n=e.SCRBBL,i=e.document,r=(n.use("utils"),function(e){return e?(e+"").match(/px|\%/gi)?e:e+"px":""});return{width:function(n){var s="",a=i.querySelector===t;return s=n.params.width?n.params.width:!e.postMessage||a?"100%":0!==n.theme.id&&n.theme.size&&n.theme.size.width_autoscale?"100%":0!==n.theme.id&&n.theme.size&&n.theme.size.width?n.theme.size.width:"100%",r(s)},height:function(n,s){var a="",o={event:"500px",board:"500px",article:"500px",timeline:(e.innerHeight>800?"800":e.innerHeight+25)+"px",slideshow:"500px",post:"200px",mobile:"100%",livescoreboard:"500px",manualscoreboard:"500px"},l=i.querySelector===t;return a=n.params.height?n.params.height:!e.postMessage||l?o[n.type]:0!==n.theme.id&&n.theme.size&&n.theme.size.height_autoscale?s||o[n.type]:0!==n.theme.id&&n.theme.size&&n.theme.size.height?n.theme.size.height:s||o[n.type],r(a)}}}),SCRBBL.define(function(t,n){"use strict";var i=t.SCRBBL,r=t.document,s=i.use("utils"),a=i.use("inst"),o=i.use("render.iframe"),l=i.use("messages"),c=function(){},u=function(){};return"addEventListener"in t?(c=function(e,t,n){e.addEventListener(t,n,!1)},u=function(e,t,n){e.removeEventListener(t,n,!1)}):"attachEvent"in t&&(c=function(e,t,n){e.attachEvent("on"+t,n)},u=function(t,n,i){t.detachEvent("on"+e,i)}),{go:function(e){var t,n=!1;for(var c in void 0!==e?a.create(s.es5.getElementsByClassName("scrbbl-embed",e,"div")):a.create(s.es5.getElementsByClassName("scrbbl-embed",r,"div")),i.instance)(t=i.instance[c]).error||(o.iframe(t),n=!0);n&&l.receive()},on:c,off:u}}),SCRBBL.go();